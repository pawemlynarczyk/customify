<!doctype html>
<html
  class="no-js{% if request.design_mode %} shopify-design-mode{% endif %}"
  lang="{{ request.locale.iso_code }}"
>
  <head>
    {%- render 'stylesheets' -%}

    {%- if settings.favicon != blank -%}
      <link
        rel="icon"
        type="image/png"
        href="{{ settings.favicon | image_url: width: 32, height: 32 }}"
      >
    {%- endif -%}

    {% comment %} This a way to wait for main content to load when navigating to a new page so that the view transitions can work consistently {% endcomment %}
    <link
      rel="expect"
      href="#MainContent"
      blocking="render"
      id="view-transition-render-blocker"
    >

    {%- render 'meta-tags' -%}
    {%- render 'fonts' -%}
    {%- render 'scripts' -%}
    {%- render 'theme-styles-variables' -%}
    {%- render 'color-schemes' -%}

    {% if request.design_mode %}
      {%- render 'theme-editor' -%}
    {% endif %}

    <!-- CUSTOMIFY INTEGRATION -->
    <link rel="stylesheet" href="{{ 'customify.css' | asset_url }}">
    <script src="{{ 'customify.js' | asset_url }}" defer></script>

    {{ content_for_header }}
  </head>

  <body class="page-width-{{ settings.page_width }} card-hover-effect-{{ settings.card_hover_effect }}">
    {% render 'skip-to-content-link', href: '#MainContent', text: 'accessibility.skip_to_text' %}
    
    <!-- KOMPLETNY NAGŁÓWEK CUSTOMIFY -->
    <header class="header-main">
      <div class="header-container">
        
        <!-- Logo -->
        <div class="header-logo">
          <a href="{{ routes.root_url }}" class="logo-link">
            {% if settings.logo != blank %}
              <img src="{{ settings.logo | image_url: width: 200 }}" alt="{{ shop.name }}" class="logo-image">
            {% else %}
              <span class="logo-text">{{ shop.name }}</span>
            {% endif %}
          </a>
        </div>

        <!-- Wyszukiwarka -->
        <div class="header-search">
          <form action="{{ routes.search_url }}" method="get" class="search-form">
            <div class="search-wrapper">
              <select name="type" class="search-categories">
                <option value="">Wszystkie kategorie</option>
                <option value="product">Produkty</option>
                <option value="article">Artykuły</option>
                <option value="page">Strony</option>
              </select>
              <input 
                type="search" 
                name="q" 
                placeholder="Szukaj..." 
                class="search-input"
                value="{{ search.terms | escape }}"
              >
              <button type="submit" class="search-button">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path d="M21 21L16.514 16.506M19 10.5C19 15.194 15.194 19 10.5 19S2 15.194 2 10.5 5.806 2 10.5 2 19 5.806 19 10.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
          </form>
        </div>

        <!-- Linki użytkownika -->
        <div class="header-user">
          {% if customer %}
            <a href="{{ routes.account_url }}" class="user-link">Moje konto</a>
            <a href="{{ routes.account_logout_url }}" class="user-link">Wyloguj się</a>
          {% else %}
            <a href="{{ routes.account_login_url }}" class="user-link">Zaloguj się</a>
            <a href="{{ routes.account_register_url }}" class="user-link">Zarejestruj się</a>
          {% endif %}
        </div>

        <!-- Koszyk -->
        <div class="header-cart">
          <a href="{{ routes.cart_url }}" class="cart-link">
            <div class="cart-icon-wrapper">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" class="cart-icon">
                <path d="M3 3H5L5.4 5M7 13H17L21 5H5.4M7 13L5.4 5M7 13L4.7 15.3C4.3 15.7 4.6 16.5 5.1 16.5H17M17 13V17C17 18.1 16.1 19 15 19H9C7.9 19 7 18.1 7 17V13M17 13H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              {% if cart.item_count > 0 %}
                <span class="cart-count">{{ cart.item_count }}</span>
              {% endif %}
            </div>
            <span class="cart-text">Koszyk</span>
          </a>
        </div>

      </div>

      <!-- Menu główne -->
      <nav class="header-nav">
        <div class="nav-container">
          {% for link in linklists.main-menu.links %}
            <div class="nav-item">
              <a href="{{ link.url }}" class="nav-link">
                {{ link.title }}
                {% if link.links.size > 0 %}
                  <svg width="12" height="12" viewBox="0 0 12 12" fill="none" class="dropdown-arrow">
                    <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                {% endif %}
              </a>
              
              <!-- Dropdown menu -->
              {% if link.links.size > 0 %}
                <div class="nav-dropdown">
                  <div class="dropdown-content">
                    {% for child_link in link.links %}
                      <a href="{{ child_link.url }}" class="dropdown-link">
                        {{ child_link.title }}
                      </a>
                    {% endfor %}
                  </div>
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </nav>

    </header>

    <!-- Breadcrumbs -->
    {% if template contains 'product' or template contains 'collection' or template contains 'blog' %}
      <div class="breadcrumbs">
        <div class="breadcrumbs-container">
          <a href="{{ routes.root_url }}" class="breadcrumb-link">Home</a>
          {% if template contains 'product' %}
            <span class="breadcrumb-separator">/</span>
            <a href="{{ routes.collections_url }}" class="breadcrumb-link">Personalizowane prezenty</a>
            <span class="breadcrumb-separator">/</span>
            <a href="{{ routes.collections_url }}" class="breadcrumb-link">Prezent dla Rodziców</a>
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">{{ product.title | truncate: 50 }}</span>
          {% elsif template contains 'collection' %}
            <span class="breadcrumb-separator">/</span>
            <span class="breadcrumb-current">{{ collection.title }}</span>
          {% elsif template contains 'blog' %}
            <span class="breadcrumb-separator">/</span>
            <a href="{{ blog.url }}" class="breadcrumb-link">{{ blog.title }}</a>
            {% if article %}
              <span class="breadcrumb-separator">/</span>
              <span class="breadcrumb-current">{{ article.title | truncate: 30 }}</span>
            {% endif %}
          {% endif %}
        </div>
      </div>
    {% endif %}

    <script
      src="{{ 'critical.js' | asset_url }}"
      type="module"
      async
      blocking="render"
    ></script>

    <main
      id="MainContent"
      class="content-for-layout"
      role="main"
      data-page-transition-enabled="{{ settings.page_transition_enabled }}"
      data-product-transition="{{ settings.transition_to_main_product }}"
      data-template="{{ template }}"
    >
      {{ content_for_layout }}
    </main>

    {% sections 'footer-group' %}

    {% render 'search-modal' %}

    {% if settings.quick_add or settings.mobile_quick_add %}
      {% render 'quick-add-modal' %}
          {% endif %}

    {% comment %} CUSTOMIFY AI PHOTO CUSTOMIZATION {% endcomment %}
    {% if template contains 'product' %}
      <div id="customify-app-container" class="customify-shopify-container" style="display: none;">
        <h3 class="customify-title">Wgraj zdjęcie - wybierz styl obrazu</h3>
        <div class="customify-inline-wrapper">
          <div class="customify-embed" id="customifyEmbed">
          <div class="customify-upload-area" id="uploadArea">
            <button class="customify-upload-btn" id="uploadBtn">
              Wgraj zdjęcie
            </button>
            <div class="customify-upload-hint">Maksymalnie 10MB, formaty: JPG, PNG, GIF</div>
            <input type="file" id="fileInput" class="customify-file-input" accept="image/*">
          </div>

            <div class="customify-preview" id="previewArea">
              <h4>Twoje zdjęcie:</h4>
              <img id="previewImage" alt="Podgląd zdjęcia">
            </div>

            <div class="customify-styles" id="stylesArea" style="display: none;">
              <h4>Wybierz styl AI:</h4>
              <div class="customify-style-grid">
                <div class="customify-style-card" data-style="van gogh">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.01.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Van Gogh</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="picasso">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.14.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Picasso</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="monet">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.37.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Monet</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="anime">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.52.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Anime</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="cyberpunk">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.01.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Cyberpunk</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="watercolor">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.14.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Akwarela</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="pixar">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.37.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Pixar</div>
                  </div>
                </div>
              </div>
        </div>

            <div class="customify-actions" id="actionsArea" style="display: none;">
              <button class="customify-btn customify-btn-primary" id="transformBtn">
                Przekształć z AI
              </button>
              <button class="customify-btn customify-btn-secondary" id="resetBtn">
                Wgraj inne zdjęcie
              </button>
      </div>

            <div class="customify-loading" id="loadingArea">
              <div class="customify-spinner"></div>
              <div>Przetwarzanie z AI...</div>
            </div>

            <div class="customify-result" id="resultArea">
              <h4>Wynik transformacji AI:</h4>
              <img id="resultImage" alt="Wynik AI">
              
              <!-- Rozmiary pod zdjęciem wynikowym -->
              <div class="customify-size-selector" id="sizeArea" style="display: none;">
                <h4>Wybierz rozmiar:</h4>
                <div class="customify-size-buttons">
                  <div class="customify-size-btn" data-size="small">Mały (+0 zł)</div>
                  <div class="customify-size-btn" data-size="medium">Średni (+25 zł)</div>
                  <div class="customify-size-btn" data-size="large">Duży (+50 zł)</div>
                  <div class="customify-size-btn" data-size="xlarge">Bardzo duży (+100 zł)</div>
                  </div>
                </div>
              
              <div class="customify-actions" style="margin-top: 15px;">
                <button class="customify-btn customify-btn-primary" id="addToCartBtn">
                  Dodaj do koszyka
                </button>
                <button class="customify-btn customify-btn-secondary" id="tryAgainBtn">
                  Spróbuj ponownie
                </button>
            </div>
        </div>

            <div class="customify-error" id="errorMessage"></div>
            <div class="customify-success" id="successMessage"></div>
          </div>
        </div>
      </div>
      
      <style>
        /* GRID STYLÓW AI - TYLKO STYLE, NIE DOTYKAM PROPORCJI */
        .customify-style-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 15px;
          margin-bottom: 20px;
        }

        .customify-style-card {
          border: 2px solid #dee2e6;
          border-radius: 8px;
          background: white;
          cursor: pointer;
          transition: all 0.3s ease;
          overflow: hidden;
        }

        .customify-style-card:hover {
          border-color: #e55a2b;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .customify-style-card.active {
          border-color: #ff6b35;
          box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.2);
        }

        .style-image {
          height: 80px;
          background-size: cover;
          background-position: center;
        }

        /* Gradienty usunięte - używamy obrazków */

        .style-info {
          padding: 8px;
          text-align: center;
        }

        .style-name {
          font-weight: 600;
          font-size: 0.9rem;
          color: #333;
          margin-bottom: 2px;
        }

        /* Ceny stylów usunięte - style nie wpływają na cenę */

        @media (max-width: 768px) {
          .customify-style-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
          }
        }
      </style>
    {% endif %}

    {% comment %} CUSTOMIFY CART INTEGRATION {% endcomment %}
    {% if template contains 'cart' %}
      <style>
        .cart-item__ai-image {
          width: 80px;
          height: 80px;
          object-fit: cover;
          border-radius: 0;
          border: 2px solid #e0e0e0;
          margin-right: 15px;
        }
        
        .cart-item__content-wrapper {
          display: flex;
          gap: 15px;
          align-items: start;
        }
      </style>
    {% endif %}

    {% comment %} CUSTOMIFY CUSTOMER REVIEWS {% endcomment %}
    {% if template contains 'product' %}
    <div class="customer-reviews-section">
      <div class="reviews-header">
        <h2 class="reviews-title">
          ⭐ Opinie klientów
          <a href="#customer-reviews" class="reviews-link">Zobacz wszystkie opinie</a>
        </h2>
        <div class="stars-rating">
          <span class="star">★</span>
          <span class="star">★</span>
          <span class="star">★</span>
          <span class="star">★</span>
          <span class="star">★</span>
          <span style="margin-left: 10px; color: #6c757d; font-weight: 600;">4.9/5 (127 opinii)</span>
        </div>
      </div>
      
      <div class="reviews-grid" id="customer-reviews">
        <div class="review-card">
          <div class="review-header">
            <div class="review-author">Anna K.</div>
            <div class="review-date">15.01.2025</div>
          </div>
          <div class="review-stars">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <div class="review-text">
            "Niesamowite! Moje zdjęcie w stylu anime wygląda jak prawdziwe dzieło sztuki. Jakość druku na płótnie jest doskonała, kolory są żywe i wyraźne. Polecam każdemu!"
          </div>
          <div class="review-style">Styl: Anime</div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="review-author">Marcin W.</div>
            <div class="review-date">12.01.2025</div>
          </div>
          <div class="review-stars">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <div class="review-text">
            "Zamówiłem portret w stylu Van Gogh dla żony na rocznicę. Była zachwycona! AI doskonale odtworzyło styl malarza. Szybka realizacja i świetna jakość."
          </div>
          <div class="review-style">Styl: Van Gogh</div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="review-author">Katarzyna M.</div>
            <div class="review-date">10.01.2025</div>
          </div>
          <div class="review-stars">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <div class="review-text">
            "Cyberpunk style to był strzał w dziesiątkę! Moje zdjęcie wygląda jak z filmu sci-fi. Płótno jest wysokiej jakości, a kolory są niesamowicie intensywne."
          </div>
          <div class="review-style">Styl: Cyberpunk</div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="review-author">Piotr L.</div>
            <div class="review-date">08.01.2025</div>
          </div>
          <div class="review-stars">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <div class="review-text">
            "Akwarela wyszła przepięknie! Delikatne kolory i miękki styl idealnie pasują do naszego salonu. Żona już planuje kolejne zamówienia."
          </div>
          <div class="review-style">Styl: Akwarela</div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="review-author">Magdalena S.</div>
            <div class="review-date">05.01.2025</div>
          </div>
          <div class="review-stars">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <div class="review-text">
            "Monet style to czysta magia! Moje zdjęcie wygląda jak impresjonistyczne dzieło sztuki. Jakość wykonania i szybkość realizacji na najwyższym poziomie."
          </div>
          <div class="review-style">Styl: Monet</div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="review-author">Tomasz K.</div>
            <div class="review-date">03.01.2025</div>
          </div>
          <div class="review-stars">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <div class="review-text">
            "Picasso style to prawdziwe dzieło sztuki! Abstrakcyjne formy i wyraziste kolory tworzą niesamowity efekt. Polecam każdemu miłośnikowi sztuki."
          </div>
          <div class="review-style">Styl: Picasso</div>
        </div>

        <div class="review-card">
          <div class="review-header">
            <div class="review-author">Agnieszka R.</div>
            <div class="review-date">01.01.2025</div>
          </div>
          <div class="review-stars">
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
            <span class="star">★</span>
          </div>
          <div class="review-text">
            "Renesans to absolutnie niesamowity styl! Moje zdjęcie wygląda jak prawdziwy portret z epoki renesansu. Dramatyczne światło i szczegóły są imponujące!"
          </div>
          <div class="review-style">Styl: Renesans</div>
        </div>
      </div>
    </div>
    {% endif %}
  </body>
</html>