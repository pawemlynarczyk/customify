{% liquid
  if section.settings.desktop_media_position == 'left'
    assign render_order = 'media,product-details'
  else
    assign render_order = 'product-details,media'
  endif

  assign product_has_media = true
  if closest.product.media.size == 0
    assign product_has_media = false
  endif

  assign product_grid_class = 'product-information__grid'

  if product_has_media == false
    assign product_grid_class = product_grid_class | append: ' product-information--media-none'
  elsif section.settings.desktop_media_position == 'right'
    assign product_grid_class = product_grid_class | append: ' product-information--media-right'
  else
    assign product_grid_class = product_grid_class | append: ' product-information--media-left'
  endif

  if section.settings.equal_columns
    assign product_grid_class = product_grid_class | append: ' product-information__grid--half'

    if section.settings.limit_details_width
      assign product_grid_class = product_grid_class | append: ' product-information__grid--limit-details'
    endif
  endif

  case section.settings.content_width
    when 'content-center-aligned'
      assign content_width = 'page-width'
    when 'content-full-width'
      assign content_width = 'full-width'
  endcase
%}

<script type="application/ld+json">
  {{ closest.product | structured_data }}
</script>

<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="product-information section section--{{ content_width }} spacing-style color-{{ section.settings.color_scheme }} relative"
  style="{% render 'spacing-style', settings: section.settings %} --gap: {{ section.settings.gap }}px;"
>
  {% if section.settings.desktop_media_position == 'left' and product_has_media %}
    {% assign product_href = '#ProductInformation-' | append: section.id %}
    {% render 'skip-to-content-link', href: product_href, text: 'accessibility.skip_to_product_info' %}
  {% endif %}
  <div
    class="{{ product_grid_class }}"
    data-product-grid-content
  >
    {% assign render_order_array = render_order | split: ',' %}
    {% capture media %}
      <div
        class="product-information__media"
        data-testid="product-information-media"
      >
        {%- content_for 'block',
          type: '_product-media-gallery',
          id: 'media-gallery',
          closest.product: closest.product
        -%}
      </div>
    {% endcapture %}

    {% capture details %}
      {% content_for 'block',
        type: '_product-details',
        id: 'product-details',
        closest.product: closest.product
      %}
    {% endcapture %}

    {% for block in render_order_array %}
      {% if block == 'media' and product_has_media %}
        {{ media }}
      {% elsif block == 'product-details' %}
        {{ details }}
      {% endif %}
    {% endfor %}
    
    {%- comment -%} CUSTOMIFY APP - INSIDE GRID {%- endcomment -%}
    <div style="grid-column: 1 / -1;">
      {% comment %} CUSTOMIFY AI PHOTO CUSTOMIZATION {% endcomment %}
    {% if template contains 'product' %}
      <div id="customify-app-container" class="customify-shopify-container">
        <h3 class="customify-title">Wgraj zdjęcie - wybierz styl obrazu</h3>
        <div class="customify-inline-wrapper">
          <div class="customify-embed" id="customifyEmbed">
          <div class="customify-upload-area" id="uploadArea">
            <button class="customify-upload-btn" id="uploadBtn">
              Wgraj zdjęcie
            </button>
            {% if product.handle == 'koty-krolewskie-zwierzeta-w-koronach' %}
              <div class="customify-upload-hint">Min. 600×600px, max 10MB, formaty: JPG, PNG, GIF</div>
            {% else %}
              <div class="customify-upload-hint">Min. 768×768px, max 10MB, formaty: JPG, PNG, GIF</div>
            {% endif %}
            <input type="file" id="fileInput" class="customify-file-input" accept="image/*">
            <!-- Komunikat błędu - od razu pod uploadem -->
            <div class="customify-error" id="errorMessage" style="display: none; margin-top: 10px;"></div>
          </div>

            <div class="customify-preview" id="previewArea">
              <h4>Twoje zdjęcie:</h4>
              <img id="previewImage" alt="Podgląd zdjęcia">
            </div>

            <div class="customify-styles" id="stylesArea" style="display: none;">
              <h4>Wybierz styl</h4>
              <div class="customify-style-grid">
                {% comment %} LOGIKA SERVER-SIDE: Filtruj style per produkt {% endcomment %}
                {% if product.handle == 'personalizowany-portret-w-stylu-boho' %}
                  {% comment %} NOWE STYLE BOHO dla produktu boho {% endcomment %}
                  <div class="customify-style-card" data-style="minimalistyczny">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/boho/minimal.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-name">Minimalistyczny</div>
                  </div>
                  
                  <div class="customify-style-card" data-style="realistyczny">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/boho/detail.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-name">Realistyczny</div>
                  </div>
                {% elsif product.handle == 'koty-krolewskie-zwierzeta-w-koronach' %}
                  {% comment %} TYLKO STYLE KOTÓW dla produktu kotów {% endcomment %}
                  <div class="customify-style-card" data-style="krolewski">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/koty/krolewski.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Królewski Kot</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="na-tronie">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/koty/na_tronie.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Kot na Tronie</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="wojenny">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/koty/wojenny.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Wojenny Kot</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="wiktorianski">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/koty/wiktorianski.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Wiktoriański Kot</div>
                  </div>
                </div>
                <div class="customify-style-card" data-style="renesansowy">
                  <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/koty/renesansowy.png'); background-size: cover; background-position: center;"></div>
                  <div class="style-info">
                    <div class="style-name">Renesansowy Kot</div>
                  </div>
                </div>
                {% elsif product.handle == 'krol-portret-personalizowany' %}
                  {% comment %} TYLKO STYLE KRÓLA dla produktu Król Portret {% endcomment %}
                  <div class="customify-style-card" data-style="krol-krolewski">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/krol/krol-styl-1.jpg'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Król Królewski</div>
                    </div>
                  </div>
                  <div class="customify-style-card" data-style="krol-majestatyczny">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/krol/krol-styl-2.jpg'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Król Majestatyczny</div>
                    </div>
                  </div>
                  <div class="customify-style-card" data-style="krol-triumfalny">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/krol/krol-styl-3.jpg'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Król Triumfalny</div>
                    </div>
                  </div>
                {% else %}
                  {% comment %} WSZYSTKIE STYLE NORMALNE dla innych produktów {% endcomment %}
                  <div class="customify-style-card" data-style="van gogh">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.01.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Van Gogh</div>
                    </div>
                  </div>
                  <div class="customify-style-card" data-style="picasso">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.14.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Picasso</div>
                    </div>
                  </div>
                  <div class="customify-style-card" data-style="monet">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.37.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Monet</div>
                    </div>
                  </div>
                  <div class="customify-style-card" data-style="anime">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.52.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Anime</div>
                    </div>
                  </div>
                  <div class="customify-style-card" data-style="cyberpunk">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.01.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Cyberpunk</div>
                    </div>
                  </div>
                  <div class="customify-style-card" data-style="watercolor">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.14.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Akwarela</div>
                    </div>
                  </div>
                  <div class="customify-style-card" data-style="pixar">
                    <div class="style-image" style="background-image: url('https://customify-s56o.vercel.app/Screenshot%202025-09-29%20at%2022.17.37.png'); background-size: cover; background-position: center;"></div>
                    <div class="style-info">
                      <div class="style-name">Pixar</div>
                    </div>
                  </div>
                {% endif %}
              </div>
        </div>

            <!-- Komunikat błędu - nad przyciskami -->
            <div class="customify-error" id="errorMessageBottom" style="display: none; margin: 15px 0;"></div>
            
            <div class="customify-actions" id="actionsArea" style="display: none;">
              <button class="customify-btn customify-btn-red" id="transformBtn">
                Zobacz Podgląd
              </button>
              <button class="customify-btn customify-btn-secondary" id="resetBtn" style="display: none;">
                Wgraj inne zdjęcie
              </button>
              <button class="customify-btn customify-btn-primary" id="addToCartBtnMain" style="display: none;">
                Dodaj do koszyka
              </button>
      </div>

            <div class="customify-loading" id="loadingArea">
              <div class="customify-spinner"></div>
              <div class="loading-text">Przetwarzanie...</div>
              <div class="loading-progress">
                <div class="loading-progress-bar" id="progressBar"></div>
              </div>
              <div class="loading-stage" id="loadingStage">Przesyłanie zdjęcia...</div>
            </div>

            <div class="customify-result" id="resultArea">
              <h4>Twój obraz:</h4>
              <img id="resultImage" alt="Wynik AI">
              
              <!-- Komunikat sukcesu -->
              <div class="customify-success" id="successMessage"></div>
              
              <!-- Rozmiary - przeniesione zaraz nad przyciski -->
              <div class="customify-size-selector" id="sizeArea" style="display: block;">
                <h4>Wybierz rozmiar:</h4>
                <div class="customify-size-buttons">
                  <div class="customify-size-btn" data-size="a5">A5 - 15×21 cm<br>+30 zł</div>
                  <div class="customify-size-btn" data-size="a4">A4 - 21×30 cm<br>+89 zł</div>
                  <div class="customify-size-btn" data-size="a3">A3 - 30×42 cm<br>+139 zł</div>
                  <div class="customify-size-btn" data-size="a2">A2 - 42×59 cm<br>+189 zł</div>
                </div>
              </div>
              
              <div class="customify-actions" style="margin-top: 15px;">
                <button class="customify-btn customify-btn-primary customify-btn-red" id="addToCartBtn">
                  Dodaj do koszyka
                </button>
                <button class="customify-btn customify-btn-secondary" id="tryAgainBtn">
                  Spróbuj ponownie
                </button>
            </div>
            
            <!-- Pasek postępu dla dodawania do koszyka -->
            <div class="customify-cart-loading" id="cartLoadingArea" style="display: none;">
              <div class="customify-spinner"></div>
              <div class="loading-text">Dodawanie do koszyka...</div>
              <div class="loading-progress">
                <div class="loading-progress-bar" id="cartProgressBar"></div>
              </div>
              <div class="loading-stage" id="cartLoadingStage">Tworzenie produktu...</div>
            </div>
            </div>

            <!-- ACCORDION: SZCZEGÓŁY PRODUKTU (NA SAMYM DOLE APLIKACJI) -->
            <div class="product-details-accordion">
              
              <!-- 1. Szczegóły produktu -->
              <div class="accordion-item" data-accordion="details">
                <div class="accordion-header">
                  <div class="accordion-title">
                    <span>📋</span>
                    <span>O produkcie</span>
                  </div>
                  <span class="accordion-icon">▼</span>
                </div>
                <div class="accordion-content">
                  <ul>
                    <li><strong>🎨 Piękne płótno artystyczne:</strong> Twoje zdjęcie wydrukowane na grubym, premium płótnie canvas z naturalną teksturą</li>
                    <li><strong>🖼️ Elegancka rama:</strong> Solidna drewniana rama z naturalnej sosny, na której płótno jest pięknie naciągnięte</li>
                    <li><strong>✨ Matowe wykończenie:</strong> Żadnych nieestetycznych odblasków światła - obraz wygląda profesjonalnie z każdej strony</li>
                    <li><strong>🔧 Gotowe do powieszenia:</strong> Wieszak w zestawie - wystarczy powiesić na ścianie, nic więcej do montażu!</li>
                    <li><strong>🤖 Twoje zdjęcie + magia AI:</strong> Przekształcamy Twoje zdjęcie w wybranym stylu artystycznym - od klasyki po nowoczesność</li>
                  </ul>
                </div>
              </div>

              <!-- 2. Wysyłka i dostawa -->
              <div class="accordion-item" data-accordion="shipping">
                <div class="accordion-header">
                  <div class="accordion-title">
                    <span>📦</span>
                    <span>Wysyłka i dostawa</span>
                  </div>
                  <span class="accordion-icon">▼</span>
                </div>
                <div class="accordion-content">
                  <ul>
                    <li><strong>⚡ Szybka realizacja:</strong> 3-5 dni roboczych od akceptacji projektu</li>
                    <li><strong>📦 Bezpieczne opakowanie:</strong> Karton wzmocniony + folia bąbelkowa</li>
                    <li><strong>🇵🇱 Wysyłka z Polski:</strong> InPost Paczkomaty, Poczta Polska, Kurier DPD</li>
                    <li><strong>📍 Śledzenie przesyłki:</strong> Numer trackingowy wysyłany mailem</li>
                  </ul>
                </div>
              </div>

              <!-- 3. Dostępne rozmiary -->
              <div class="accordion-item" data-accordion="sizes">
                <div class="accordion-header">
                  <div class="accordion-title">
                    <span>📏</span>
                    <span>Dostępne rozmiary</span>
                  </div>
                  <span class="accordion-icon">▼</span>
                </div>
                <div class="accordion-content">
                  <div class="accordion-size-grid">
                    <div class="accordion-size-item">
                      <div class="accordion-size-name">A5</div>
                      <div class="accordion-size-dimensions">15 × 21 cm</div>
                      <div class="accordion-size-description">Idealny na biurko lub małą półkę</div>
                    </div>
                    <div class="accordion-size-item">
                      <div class="accordion-size-name">A4</div>
                      <div class="accordion-size-dimensions">21 × 30 cm</div>
                      <div class="accordion-size-description">Świetny do małych pokoi</div>
                    </div>
                    <div class="accordion-size-item">
                      <div class="accordion-size-name">A3</div>
                      <div class="accordion-size-dimensions">30 × 42 cm</div>
                      <div class="accordion-size-description">Doskonały do średnich pomieszczeń</div>
                    </div>
                    <div class="accordion-size-item">
                      <div class="accordion-size-name">A2</div>
                      <div class="accordion-size-dimensions">42 × 59 cm</div>
                      <div class="accordion-size-description">Efektowny na duże ściany w salonie</div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- 4. Jak to działa -->
              <div class="accordion-item" data-accordion="howto">
                <div class="accordion-header">
                  <div class="accordion-title">
                    <span>💡</span>
                    <span>Jak to działa?</span>
                  </div>
                  <span class="accordion-icon">▼</span>
                </div>
                <div class="accordion-content">
                  <div class="accordion-step">
                    <div class="accordion-step-number">1</div>
                    <div class="accordion-step-content">
                      <strong>Wgraj swoje zdjęcie</strong><br>
                      JPG, PNG lub GIF do 10MB. Najlepiej w wysokiej rozdzielczości.
                    </div>
                  </div>
                  <div class="accordion-step">
                    <div class="accordion-step-number">2</div>
                    <div class="accordion-step-content">
                      <strong>Wybierz styl artystyczny</strong><br>
                      Van Gogh, Picasso, Monet, Anime, Cyberpunk, Akwarela, Pixar i więcej!
                    </div>
                  </div>
                  <div class="accordion-step">
                    <div class="accordion-step-number">3</div>
                    <div class="accordion-step-content">
                      <strong>AI przekształci Twoje zdjęcie</strong><br>
                      Najnowocześniejsza technologia sztucznej inteligencji w 30-60 sekund.
                    </div>
                  </div>
                  <div class="accordion-step">
                    <div class="accordion-step-number">4</div>
                    <div class="accordion-step-content">
                      <strong>Wybierz rozmiar i dodaj do koszyka</strong><br>
                      A5, A4, A3 lub A2 - wybierz idealny rozmiar dla Twojej przestrzeni.
                    </div>
                  </div>
                  <div class="accordion-step">
                    <div class="accordion-step-number">5</div>
                    <div class="accordion-step-content">
                      <strong>Drukujemy i wysyłamy</strong><br>
                      Wysokiej jakości druk na płótnie premium, bezpiecznie zapakowany.
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <!-- KONIEC ACCORDION (NA SAMYM DOLE) -->

              </div>
          </div>
        </div>
      </div>
      
      <style>
        /* GRID STYLÓW AI - TYLKO STYLE, NIE DOTYKAM PROPORCJI */
        .customify-style-grid {
          display: grid;
          grid-template-columns: repeat(4, 1fr);
          gap: 15px;
          margin-bottom: 20px;
        }

        .customify-style-card {
          border: 2px solid #dee2e6;
          border-radius: 8px;
          background: white;
          cursor: pointer;
          transition: all 0.3s ease;
          overflow: hidden;
        }

        .customify-style-card:hover {
          border-color: #c82333;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .customify-style-card.active {
          border-color: #dc3545 !important;
          box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.2) !important;
          transform: scale(1.02) !important;
        }

        .style-image {
          width: 100%;
          aspect-ratio: 1 / 1;
          background-size: contain;
          background-position: center;
          background-repeat: no-repeat;
        }

        /* Miniaturki kotów - portret 3:4 (jak będzie wysyłane do Nano Banana) */
        [data-style="krolewski"] .style-image,
        [data-style="na-tronie"] .style-image,
        [data-style="wojenny"] .style-image,
        [data-style="wiktorianski"] .style-image,
        [data-style="renesansowy"] .style-image {
          aspect-ratio: 3 / 4; /* Portret - jak w API */
        }

        /* Miniaturki boho - portret 3:4 (jak koty, bo używają tego samego API) */
        [data-style="minimalistyczny"] .style-image,
        [data-style="realistyczny"] .style-image {
          aspect-ratio: 3 / 4; /* Portret - jak w API */
        }

        /* Gradienty usunięte - używamy obrazków */

        .style-info {
          padding: 8px;
          text-align: center;
        }

        .style-name {
          font-weight: 600;
          font-size: 0.9rem;
          color: #333;
          margin-bottom: 2px;
        }

        /* Ceny stylów usunięte - style nie wpływają na cenę */

        @media (max-width: 768px) {
          .customify-style-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
          }
        }

        /* MOBILE HEADER STYLES */
        @media (max-width: 768px) {
          /* GÓRA HEADERA: Logo + Ikony w jednej linii */
          .header-top .header-container {
            display: flex !important;
            flex-direction: row !important;
            align-items: center !important;
            justify-content: space-between !important;
            padding: 15px !important;
            gap: 15px !important;
          }
          
          /* LOGO NA MOBILE */
          .header-logo {
            flex-grow: 1 !important;
            text-align: center !important;
          }
          
          /* ZMNIEJSZ LOGO NA MOBILE */
          .header-logo img {
            max-width: 120px !important;
            height: auto !important;
          }
          
          /* IKONKI PO PRAWEJ */
          .header-right {
            display: flex !important;
            align-items: center !important;
            gap: 15px !important;
          }
          
          /* DÓŁ HEADERA: Menu poniżej */
          .header-bottom {
            width: 100% !important;
            background-color: #f8f9fa !important;
            border-top: 1px solid #dee2e6 !important;
          }
          
          .header-bottom .header-container {
            padding: 10px 15px !important;
          }
          
          .header-nav {
            display: flex !important;
            justify-content: center !important;
            flex-wrap: wrap !important;
            gap: 15px !important;
          }
          
          .nav-item {
            margin-right: 0 !important;
            margin-bottom: 0 !important;
          }
          
          .nav-link {
            font-size: 14px !important;
            padding: 8px 12px !important;
            color: #495057 !important;
            text-decoration: none !important;
            border-radius: 4px !important;
            transition: background-color 0.2s !important;
          }
          
          .nav-link:hover {
            background-color: #e9ecef !important;
            color: #dc3545 !important;
          }
          
          /* UKRYJ NAPISY "ZALOGUJ" I "ZAREJESTRUJ" NA MOBILE */
          .user-text-link {
            display: none !important;
          }
          
          /* ZOSTAW TYLKO IKONKĘ OSOBY */
          .user-section {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 0 !important;
          }
          
          /* ZMIEŃ IKONKĘ OSOBY NA BARDZIEJ POPULARNĄ I MNIEJ KOLOROWĄ */
          .user-icon-wrapper {
            width: 36px !important;
            height: 36px !important;
            border-radius: 50% !important;
            background-color: #f8f9fa !important;
            border: 1px solid #dee2e6 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
          }
          
          .user-icon {
            width: 20px !important;
            height: 20px !important;
            color: #6c757d !important;
          }
          
          /* HOVER EFFECT DLA IKONKI */
          .user-section:hover .user-icon-wrapper {
            border-color: #dc3545 !important;
            background-color: #fff5f5 !important;
          }
          
          .user-section:hover .user-icon {
            color: #dc3545 !important;
          }
        }


        /* CSS dla rozmiarów */
        .customify-size-selector {
          display: block;
          margin-bottom: 24px;
          background: white;
          border-radius: 0;
          padding: 20px 0;
          border: none;
          border-top: 1px solid #e9ecef;
        }

        .customify-size-selector h4 {
          font-size: 1.2rem;
          font-weight: 600;
          color: #000;
          margin: 0 0 16px 0;
          text-align: center;
        }

        .customify-size-buttons {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
          gap: 12px;
        }

        .customify-size-btn {
          padding: 16px 12px;
          border: 1px solid #666666 !important;
          border-radius: 0;
          background: white;
          cursor: pointer;
          transition: all 0.3s ease;
          text-align: center;
          font-size: 0.95rem;
          font-weight: 500;
          color: #333;
          box-shadow: none;
          line-height: 1.3;
          min-height: 80px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .customify-size-btn:hover {
          border-color: #c82333;
          background-color: #fff5f0;
          transform: none;
          box-shadow: none;
        }

        .customify-size-btn.active {
          border: 2px solid #dc3545 !important;
          background: #fff5f5 !important;
          color: #dc3545 !important;
          font-weight: 600 !important;
          transform: none !important;
          box-shadow: none !important;
        }
      </style>
    {% endif %}

    </div>
  </div>

  {% content_for 'blocks' %}
</div>

{% stylesheet %}
  .product-information {
    gap: var(--gap) 0;
  }

  /* Base grid layout */
  .product-information__grid {
    display: grid;
    grid-template-columns: subgrid;
    grid-column: 1 / -1;
  }

  /* Default column positions */
  .product-details {
    order: 1;
  }

  .product-information__media {
    order: 0;
    width: 0;
    min-width: 100%;
  }

  /* Mobile styles */
  @media screen and (max-width: 749px) {
    .product-information__media {
      grid-column: 1 / -1;
    }

    .product-details {
      grid-column: 2 / 3;
    }
  }

  /* Desktop styles */
  @media screen and (min-width: 750px) {
    .product-information__grid {
      grid-column: 2;
    }

    /* Position when there is no media */
    .product-information__grid.product-information--media-none,
    .product-information__grid:has(.product-information__media:empty) {
      .product-details {
        width: var(--narrow-content-width);
        margin: 0 auto;
      }
    }

    /* Position when there is media */
    .product-information__grid:not(:has(.product-information__media:empty)) {
      /* Media on the left side */
      &.product-information--media-left {
        grid-template-columns: 1fr min(50vw, var(--sidebar-width));

        .product-information__media {
          padding-right: calc(var(--gap, 0) / 2);
        }

        .product-details {
          padding-left: calc(var(--gap, 0) / 2);
        }

        &:has(.media-gallery--extend) {
          grid-column: 1 / 3;
        }
      }

      /* Media on the right side */
      &.product-information--media-right {
        grid-template-columns: min(50vw, var(--sidebar-width)) 1fr;

        .product-information__media {
          padding-left: calc(var(--gap, 0) / 2);
          order: 1;
        }

        .product-details {
          padding-right: calc(var(--gap, 0) / 2);
          order: 0;
        }

        &:has(.media-gallery--extend) {
          grid-column: 2 / -1;
        }
      }

      /* Equal width columns */
      &.product-information__grid--half,
      &.product-information__grid--half:has(.media-gallery--extend) {
        grid-column: 1 / -1;
        grid-template-columns:
          var(--full-page-grid-margin) calc(var(--full-page-grid-central-column-width) / 2) calc(
            var(--full-page-grid-central-column-width) / 2
          )
          var(--full-page-grid-margin);

        &.product-information--media-left {
          .product-information__media {
            grid-column: 2 / 3;

            &:has(.media-gallery--extend) {
              grid-column: 1 / 3;
            }
          }

          .product-details {
            grid-column: 3 / 4;
          }
        }

        &.product-information--media-right {
          .product-information__media {
            grid-column: 3 / 4;

            &:has(.media-gallery--extend) {
              grid-column: 3 / -1;
            }
          }

          .product-details {
            grid-column: 2 / 3;
          }
        }
      }
    }

    /* Handle full width section */
    .section--full-width {
      .product-information__grid:not(:has(.product-information__media:empty)),
      .product-information__grid:not(:has(.product-information__media:empty)) {
        &.product-information--media-left,
        &.product-information--media-right {
          grid-column: 1 / -1;
        }

        &.product-information--media-left .product-details {
          padding-inline-end: var(--padding-lg);
        }

        &.product-information--media-right .product-details {
          padding-inline-start: var(--padding-lg);
        }

        &.product-information__grid--half.product-information--media-left {
          .product-information__media {
            grid-column: 1 / 3;
          }

          .product-details {
            grid-column: 3 / -1;
          }
        }

        &.product-information__grid--half.product-information--media-right {
          .product-information__media {
            grid-column: 3 / -1;
          }

          .product-details {
            grid-column: 1 / 3;
          }
        }
      }
    }
  }

  /* Wider sidebar for large screens */
  @media screen and (min-width: 1200px) {
    .product-information__grid:not(
        .product-information__grid--half,
        :has(.product-information__media:empty)
      ).product-information--media-left {
      grid-template-columns: 2fr 1fr;
    }

    .product-information__grid:not(
        .product-information__grid--half,
        :has(.product-information__media:empty)
      ).product-information--media-right {
      grid-template-columns: 1fr 2fr;
    }
  }

  .product-information__grid--limit-details .product-details > .group-block {
    max-width: var(--sidebar-width);
  }

  /* If the header is sticky, make product details content stick underneath the header */
  body:has(#header-group #header-component[data-sticky-state='active']) .product-details.sticky-content--desktop {
    --sticky-header-offset: var(--header-height);
  }
{% endstylesheet %}

{% schema %}
{
  "name": "t:names.product_information",
  "blocks": [
    {
      "type": "@app"
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "header",
      "content": "t:content.layout"
    },
    {
      "type": "select",
      "id": "content_width",
      "label": "t:settings.width",
      "options": [
        {
          "value": "content-center-aligned",
          "label": "t:options.page"
        },
        {
          "value": "content-full-width",
          "label": "t:options.full"
        }
      ],
      "default": "content-center-aligned"
    },
    {
      "type": "select",
      "id": "desktop_media_position",
      "label": "t:settings.media_position",
      "options": [
        {
          "value": "left",
          "label": "t:options.left"
        },
        {
          "value": "right",
          "label": "t:options.right"
        }
      ],
      "default": "left"
    },
    {
      "type": "checkbox",
      "id": "equal_columns",
      "label": "t:settings.equal_columns",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "limit_details_width",
      "label": "t:settings.limit_product_details_width",
      "default": false,
      "visible_if": "{{ section.settings.equal_columns }}"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "t:settings.gap",
      "min": 0,
      "max": 48,
      "step": 4,
      "unit": "px",
      "default": 16
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": []
}
{% endschema %}
